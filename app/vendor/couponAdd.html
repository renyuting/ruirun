<!doctype html>
<html>

<head>
    <title>好吃佬</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <meta name="apple-touch-fullscreen" content="YES">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0">
    <meta name="HandheldFriendly" content="true"/>
    <meta name="MobileOptimized" content="320"/>
    <meta name="format-detection" content="telephone=no"/>
    <!-- 日期时间选择器css -->
    <link rel="stylesheet" href="css/mui.picker.min.css" type="text/css" media="screen" />

    <link rel="stylesheet" href="css/global.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="css/member.css" type="text/css" media="screen"/>

    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/init.js"></script>
</head>

<body>
<div id="app">

    <header class="common-header">
        <div class="top_fixed">
            <a class="top_icon go_back" href="couponManage.html"></a>
            <h1 class="top_title">新增优惠券</h1>
        </div>
    </header>

    <nav class="nav_view m_mt30">
        <div class="nav_view_item">
            <span class="item_title">优惠券类型</span>
            <div class="item_content">
                <div class='raido_box'>
                    <label class='raido_custom' :class="{'active':couponCur==1}" @click="couponCur=1">
                        <s class='icon'></s>
                        <span class='name'>店铺</span>
                    </label>
                    <label class='raido_custom' :class="{'active':couponCur==2}" @click="couponCur=2">
                        <s class='icon'></s>
                        <span class='name'>菜品</span>
                    </label>
                </div>
            </div>
        </div>
        <section v-show="couponCur==1">
            <!-- 空div，占位显示边框线 -->
            <div></div>
            <div class="nav_view_item">
                <span class="item_title">优惠券面值</span>
                <div class="item_content">
                    <input type="text" class="form-control" placeholder="请输入优惠券面额">
                    <label class="edit_unit">元</label>
                </div>
            </div>
            <div class="nav_view_item">
                <span class="item_title">公开领取</span>
                <div class="item_content">
                    <div class="mui-switch" id="receive_switch">
                        <div class="mui-switch-handle"></div>
                    </div>
                </div>
            </div>
            <p class="f_ccc fz20 m_mb10 m_plr4">如选择公开领取，则用户可以在前台领取，否则为商户在后台发放</p>
        </section>
        <section v-show="couponCur==2">
            <!-- 空div，占位显示边框线 -->
            <div></div>
            <div class="nav_view_item navigate_right" data-fullslide='show' data-target="#productfull">
                <span class="item_title">选择商品</span>
                <div class="item_content">
                    <p class="tr f_999">未选择</p>
                </div>
            </div>
        </section>
    </nav>

    <nav class="nav_view m_mt30">
        <div class="nav_view_item">
            <span class="item_title">使用条件</span>
            <div class="item_content">
                <div class="mui-switch" id="condition_switch">
                    <div class="mui-switch-handle"></div>
                </div>
            </div>
        </div>
        <div class="nav_view_item" v-show="condition">
            <span class="item_title">订单满</span>
            <div class="item_content">
                <input type="text" class="form-control" placeholder="请输入使用条件订单金额">
                <label class="edit_unit">元</label>
            </div>
        </div>
    </nav>
    
    <nav class="nav_view m_mt30">
        <div class="nav_view_item navigate_right" @click="selectBegin">
            <span class="item_title">生效时间</span>
            <div class="item_content">
                <div class="tr f_999" v-if="!beginTime">请选择</div>
                <div class='tr' v-else>
                    {{beginTime}}
                </div>
            </div>
        </div>
        <div class="nav_view_item navigate_right" @click="selectEnd">
            <span class="item_title">失效时间</span>
            <div class="item_content">
                <div class="tr f_999" v-if="!endTime">请选择</div>
                <div class='tr' v-else>
                    {{endTime}}
                </div>
            </div>
        </div>
    </nav>

    <!-- 保存按钮 -->
    <nav class="fixed_btn">
        <a href="##" class="btn btn-white">确定</a>
    </nav>

    <!-- 全屏侧滑 推荐商品1 -->
    <section class="full_slide" id="productfull">
        <header class="common-header">
            <div class="top_fixed">
                <span class="top_icon go_back" data-fullslide='miss'></span>
                <h1 class="top_title">选择商品</h1>
            </div>
        </header>
        
        <ul class="nav_view product_list">
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
            <li class="nav_view_item raido_block">
                <span class="item_title">
                    <input type="text" name="" class="form-control" value="鱼香肉丝盖饭" readonly="">
                </span>
                <div class="item_content tr">
                    <label class='raido_custom'>
                        <input type="radio" name="couponProduct">
                        <s class='icon'></s>
                    </label>
                </div>
            </li>
        </ul>

        <!-- 保存按钮 -->
        <nav class="edit_btn2">
            <a href="##" class="btn btn-white">保存</a>
        </nav>
    </section>
    <!-- 全屏侧滑 推荐商品1 end -->
</div>

<!-- MUI框架插件 -->
<script src="js/vue.js"></script>
<script src="js/mui.min.js"></script>
<script src="js/base.js"></script>
<script src="js/main.js"></script>

<!-- 日期时间选择器 -->
<script src="js/mui.picker.min.js"></script>
<script type="text/javascript">
    var vm = new Vue({
        el: "#app",
        data: {
            couponCur: 1,  // 当前新增优惠券类型  1-店铺  2-菜品
            condition: false,   // 是否有使用条件
            beginTime: '',   // 优惠券生效时间
            endTime: '',   // 优惠券失效时间
        },
        methods: {
            // 选择开始时间
            selectBegin: function(){
                var that = this;
                var options = {
                    "type":"date"
                };
                var picker = new mui.DtPicker(options);
                picker.show(function(rs) {
                    that.beginTime = rs.text;
                });
            },
            // 选择开始时间
            selectEnd: function(){
                var that = this;
                var options = {
                    "type":"date",
                    "beginDate":new Date(that.beginTime),
                };
                var picker = new mui.DtPicker(options);
                picker.show(function(rs) {
                    that.endTime = rs.text;
                });
            }
        }
    })

    // 是否选择了使用条件
    $('#condition_switch')[0].addEventListener('toggle', function(event) {
        if(event.detail.isActive){ 
            vm.condition = true
        }else{ 
            vm.condition = false
        } 
    })
</script>

</body>
</html>